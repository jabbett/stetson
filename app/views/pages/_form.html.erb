<div class="container">
  <div class="restore-message hide">
    You made changes to this content that you did not save. Those changes have been restored below. <a href="javascript:void(0);" class="btn-form-discard">Discard these changes?</a>
  </div>
  <%= form_with(model: page, validate: true, local: true, html: { id: 'form-page', autocomplete: 'off' }) do |form| %>
    <div class="field">
      <%= form.label :title %>
      <%= form.text_field :title, class: 'form-control form-control-lg' %>
    </div>

    <div class="field">
      <%= form.label :body %>
      <div class="editor">
        <div class="field">
          <%= form.text_area :body, class: 'form-control markdown', rows: 25 %>    
        </div>
        <div class="help">
          <em>Stetson uses <a href="https://www.markdownguide.org/basic-syntax/" target="_blank">Markdown syntax</a> to make writing pages fast and reliable. The basics are easy.</em>
          <table>
            <tbody>
              <tr>
                <th>Headings</th>
                <td># Heading 1
## Heading 2
### Heading 3
#### Heading 4
##### Heading 5
###### Heading 6</td>
              </tr>
              <tr>
                <th>Italics</th>
                <td>*content*</td>
              </tr>
              <tr>
                <th>Bold</th>
                <td>**strong**</td>
              </tr>
              <tr>
                <th>External link</th>
                <td>[Text](http://link)</td>
              </tr>
              <tr>
                <th>Internal link</th>
                <td>[[Page Name]]</td>
              </tr>
              <tr>
                <th>Bulleted list</th>
                <td>* first
* second</td>
              </tr>
              <tr>
                <th>Numbered list</th>
                <td>1. first
2. second</td>
              </tr>
              <tr>
                <th>Blockquote</th>
                <td>&gt; Text</td>
              </tr>
              <tr>
                <th>Code</th>
                <td>`code`</td>
              </tr>
              <tr>
                <th>Code block</th>
                <td>```
code
```</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <hr>

    <div class="field">
      <%= form.label :parent_id %>
      <%= form.collection_select :parent_id, @pages, :id, :title, { prompt: 'None (a top-level page)' }, { class: 'form-control' } %>
    </div>

    <% if page.persisted? %>
      <div class="field">
        <%= form.label :slug %>
        <%= form.text_field :slug, class: 'form-control' %>
        <div class="form-text">The slug is used to form a friendly URL for this page. You can modify it if you're unhappy with the auto-generated slug.</div>
      </div>
    <% end %>

    <div class="actions">
      <%= form.submit class: 'btn btn-primary' %>
    </div>
  <% end %>
</div>